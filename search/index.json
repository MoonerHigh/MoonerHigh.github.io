[{"content":" ğŸ’¡ TCP/IPï¼ˆTransmission Control Protocol/Internet Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®/ç½‘é™…åè®®ï¼‰æ˜¯æŒ‡èƒ½å¤Ÿåœ¨å¤šä¸ªä¸åŒç½‘ç»œé—´å®ç°ä¿¡æ¯ä¼ è¾“çš„åè®®ç°‡ã€‚TCP/IPåè®®ä¸ä»…ä»…æŒ‡çš„æ˜¯TCPÂ å’ŒIPä¸¤ä¸ªåè®®ï¼Œè€Œæ˜¯æŒ‡ä¸€ä¸ªç”±FTPã€SMTPã€TCPã€UDPã€IPç­‰åè®®æ„æˆçš„åè®®ç°‡ï¼Œ åªæ˜¯å› ä¸ºåœ¨TCP/IPåè®®ä¸­TCPåè®®å’ŒIPåè®®æœ€å…·ä»£è¡¨æ€§ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºTCP/IPåè®®ã€‚\nTCP/IPåˆ†å±‚ç®¡ç† TCP/IPåè®®æ—æŒ‰å±‚æ¬¡åˆ†å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››å±‚ã€‚\nåº”ç”¨å±‚-ä¼ è¾“å±‚-ç½‘ç»œå±‚-æ•°æ®é“¾è·¯å±‚\nTCP/IPåˆ†å±‚çš„å¥½å¤„æ˜¯å¯ä»¥è§£è€¦ï¼Œå¦‚æœäº’è”ç½‘åªç”±ä¸€ä¸ªåè®®ç»Ÿç­¹ï¼ŒæŸä¸ªåœ°æ–¹éœ€è¦æ”¹å˜è®¾è®¡æ—¶ï¼Œéœ€è¦æŠŠæ•´ä½“éƒ½æ›¿æ¢æ‰ï¼Œè€Œåˆ†å±‚ä¹‹ååªéœ€è¦æŠŠå˜åŠ¨çš„å±‚æ›¿æ¢æ‰å³å¯ã€‚\nTCP/IPé€šä¿¡ä¼ è¾“æµ åˆ©ç”¨TCP/IPåè®®ç°‡è¿›è¡Œé€šä¿¡æ—¶ï¼Œä¼šé€šè¿‡åˆ†å±‚é¡ºåºä¸å¯¹æ–¹è¿›è¡Œç¡®è®¤ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨HTTPæ¥ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹ã€‚\nå®¢æˆ·ç«¯ä½œä¸ºå‘é€ç«¯åœ¨åº”ç”¨å±‚ä½¿ç”¨HTTPåè®®å‘æŸä¸€ä¸ªwebé¡µé¢å‘é€è¯·æ±‚ã€‚ ä¸ºäº†ä¼ è¾“æ–¹ä¾¿ï¼Œåœ¨ä¼ è¾“å±‚(TCPåè®®)æŠŠä»åº”ç”¨å±‚æ¥æ”¶åˆ°çš„æ•°æ®ï¼ˆHTTPè¯·æ±‚æŠ¥æ–‡ï¼‰è¿›è¡Œåˆ†å‰²ï¼Œå¹¶åœ¨å„ä¸ªæŠ¥æ–‡ä¸Šæ‰“ä¸Šæ ‡è®°åºå·åŠç«¯å£å·åè½¬å‘ç»™ç½‘ç»œå±‚ã€‚ åœ¨ç½‘ç»œå±‚ï¼ˆIPåè®®ï¼‰ï¼Œå¢åŠ ä½œä¸ºé€šä¿¡åœ°å€çš„MACåœ°å€ç„¶åè½¬å‘ç»™æ•°æ®é“¾è·¯å±‚ã€‚ å½“æ¥æ”¶ç«¯çš„æœåŠ¡å™¨åœ¨é“¾è·¯å±‚æ”¶åˆ°æ•°æ®ï¼ŒæŒ‰åºå¾€ä¸Šå±‚å‘é€ï¼Œä¸€ç›´åˆ°åº”ç”¨å±‚ï¼Œæ‰ç®—èƒ½çœŸæ­£æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„HTTPè¯·æ±‚ã€‚\nå‘é€ç«¯åœ¨å±‚ä¸å±‚ä¹‹é—´ä¼ è¾“æ•°æ®æ—¶ï¼Œæ¯ç»è¿‡ä¸€å±‚å¿…å®šä¼šè¢«æ‰“ä¸Šè¯¥å±‚æ‰€å±çš„é¦–éƒ¨ä¿¡æ¯ã€‚åä¹‹ï¼Œæ¥æ”¶ç«¯åœ¨å±‚ä¸å±‚ä¼ è¾“æ•°æ®æ—¶ï¼Œæ¯ç»è¿‡ä¸€å±‚å¿…ä¼šæŠŠå¯¹åº”çš„é¦–éƒ¨æ¶ˆé™¤ã€‚\nTCPä¸‰æ¬¡æ¡æ‰‹ æœ€å¼€å§‹çš„æ—¶å€™å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ˜¯å¤„äºCLOSEDçŠ¶æ€ï¼Œä¸»åŠ¨æ‰“å¼€çš„æ˜¯å®¢æˆ·ç«¯ï¼Œè¢«åŠ¨æ‰“å¼€çš„æ˜¯æœåŠ¡ç«¯ã€‚\nTCPæœåŠ¡å™¨å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œæ—¶åˆ»å‡†å¤‡æ¥å—å®¢æˆ·è¿›ç¨‹çš„è¿æ¥è¯·æ±‚ï¼Œæ­¤æ—¶æœåŠ¡å™¨å°±è¿›å…¥äº†LISTENçŠ¶æ€; TCPå®¢æˆ·è¿›ç¨‹ä¹Ÿæ˜¯å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œç„¶åå‘æœåŠ¡å™¨å‘å‡ºè¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼Œè¿™æ˜¯æŠ¥æ–‡é¦–éƒ¨ä¸­çš„åŒæ­¥ä¸ºSYN=1,åŒæ—¶é€‰æ‹©ä¸€ä¸ªåˆå§‹åºåˆ—å·seq=x,æ­¤æ—¶å®¢æˆ·ç«¯è¿›ç¨‹è¿›å…¥äº†SYN-SENTï¼ˆåŒæ­¥åˆ°å·²å‘é€ï¼‰çŠ¶æ€ã€‚TCPè§„å®šï¼ŒSYNæŠ¥æ–‡æ®µï¼ˆSYN=1çš„æŠ¥æ–‡æ®µï¼‰ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†éœ€è¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·ã€‚ TCPæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åï¼Œå¦‚æœåŒæ„è¿æ¥ï¼Œåˆ™å‘å‡ºç¡®è®¤æŠ¥æ–‡ã€‚ç¡®è®¤æŠ¥æ–‡ä¸­åº”è¯¥ACK=1,SYN=1,ç¡®è®¤å·æ˜¯ack=x+1,åŒæ—¶ä¹Ÿè¦åˆå§‹åŒ–ä¸€ä¸ªåºåˆ—å·seq=yï¼Œæ­¤æ—¶TCPæœåŠ¡å™¨è¿›ç¨‹è¿›å…¥äº†SYN-RCVDçŠ¶æ€ã€‚è¿™ä¸ªæŠ¥æ–‡ä¹Ÿä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯åŒæ ·è¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚ TCPå®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œè¿˜è¦å‘æœåŠ¡å™¨ç»™å‡ºç¡®è®¤ã€‚ç¡®è®¤æŠ¥æ–‡çš„ACK=1,ack=y+1,è‡ªå·±çš„åºåˆ—å·seq=x+1,æ­¤æ—¶TCPè¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯è¿›å…¥ESTABLISHEDï¼ˆå·²å»ºç«‹è¿æ¥ï¼‰çŠ¶æ€ã€‚TCPè§„å®šï¼ŒACKæŠ¥æ–‡æ®µå¯ä»¥æºå¸¦æ•°æ®ï¼Œä½†æ˜¯å¦‚æœä¸æºå¸¦æ•°æ®åˆ™ä¸æ¶ˆè€—ä¿¡å·ã€‚ å½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤åä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œæ­¤æ—¶åŒæ–¹å°±å¯ä»¥å¼€å§‹é€šä¿¡äº†ã€‚ ä¸ºä»€ä¹ˆTCPå®¢æˆ·ç«¯æœ€åè¿˜è¦å‘é€ä¸€æ¬¡ç¡®è®¤å‘¢ï¼Ÿ\nä¸»è¦é˜²æ­¢å·²ç»å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡çªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡å™¨ï¼Œä»è€Œäº§ç”Ÿé”™è¯¯ã€‚\nTCPçš„é‡Šæ”¾-å››æ¬¡æŒ¥æ‰‹ æ•°æ®ä¼ è¾“å®Œæ¯•åï¼ŒåŒæ–¹éƒ½å¯é‡Šæ”¾è¿æ¥ã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æ˜¯å¤„äºESTABLISHEDçŠ¶æ€ï¼Œç„¶åå®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­ï¼ŒæœåŠ¡å™¨è¢«åŠ¨å…³é—­ã€‚\nå‚è€ƒèµ„æ–™\nå›¾è§£HTTP-ä¸Šé‡å®£-å¾®ä¿¡è¯»ä¹¦\nä¸¤å¼ åŠ¨å›¾-å½»åº•æ˜ç™½TCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹_å°ä¹¦goçš„åšå®¢-CSDNåšå®¢_tcpä¸‰æ¬¡æ¡æ‰‹\n","date":"2023-02-10T22:32:46+08:00","permalink":"https://MoonerHigh.github.io/p/%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3tcp%E5%8D%8F%E8%AE%AE/","title":"å¿«é€Ÿäº†è§£TCPåè®®"},{"content":"åˆ†äº«ä¹‹å‰æ¥å•ç§æ´»å†™çš„ä¸€ä¸ªçˆ¬è™«å•,å®¢æˆ·è¦æ±‚çˆ¬å–å¾®ä¿¡å…¬ä¼—å·çš„æ ‡é¢˜ï¼Œæ‰€å±å…¬ä¼—å·ï¼Œæ–‡ç« å‘å¸ƒæ—¶é—´ï¼Œæ–‡ç« åœ°å€ï¼Œä»£ç æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œç›´æ¥é‡‡ç”¨æœç‹—å¼•æ“é‡Œçš„å¾®ä¿¡å…¬ä¼—å·æ¥å£å³å¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 import time import urllib.parse import urllib.request import random import requests import parsel import csv from tqdm import tqdm # çˆ¬å–å†…å®¹å†™å…¥csvæ–‡ä»¶ def download_csv(title_str, name, otherStyleTime, article_url): dit = { \u0026#39;æ ‡é¢˜\u0026#39;: title_str, \u0026#39;å…¬ä¼—å·\u0026#39;: name, \u0026#39;æ–‡ç« å‘å¸ƒæ—¶é—´\u0026#39;: otherStyleTime, \u0026#39;æ–‡ç« åœ°å€\u0026#39;: article_url, } csv_writer.writerow(dit) # print(title_str, name, otherStyleTime, article_url) # è§£æå“åº”å†…å®¹ def parse_lable(response): selector = parsel.Selector(response.text) lis = selector.css(\u0026#39;.news-list li\u0026#39;) for li in lis: title_list = li.css(\u0026#39;.txt-box h3 a::text\u0026#39;).getall() num = len(title_list) if num == 1: title_str = keyword + title_list[0] else: title_str = keyword.join(title_list) href = li.css(\u0026#39;.txt-box h3 a::attr(href)\u0026#39;).get() article_url = \u0026#39;https://weixin.sogou.com\u0026#39; + href name = li.css(\u0026#39;.s-p a::text\u0026#39;).get() date = li.css(\u0026#39;.s-p::attr(t)\u0026#39;).get() timeArray = time.localtime(int(date)) otherStyleTime = time.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;, timeArray) download_csv(title_str, name, otherStyleTime, article_url) # è®¿é—®æœç‹—è§†é¢‘è·å–æœ€æ–°Cookie def get_new_cookies(): # æœç‹—è§†é¢‘url url = \u0026#39;https://v.sogou.com/v?ie=utf8\u0026amp;query=\u0026amp;p=40030600\u0026#39; headers = {\u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36\u0026#39;} rst = requests.get(url=url, headers=headers, allow_redirects=False) cookies = rst.cookies.get_dict() return cookies.get(\u0026#39;SNUID\u0026#39;) if __name__ == \u0026#39;__main__\u0026#39;: keyword = input(\u0026#34;è¯·è¾“å…¥æ£€ç´¢å†…å®¹ï¼š\u0026#34;) f = open(f\u0026#39;å…¬ä¼—å·æ–‡ç« _\u0026#39; + keyword + \u0026#39;.csv\u0026#39;, mode=\u0026#39;a\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;, newline=\u0026#39;\u0026#39;) csv_writer = csv.DictWriter(f, fieldnames=[\u0026#39;æ ‡é¢˜\u0026#39;, \u0026#39;å…¬ä¼—å·\u0026#39;, \u0026#39;æ–‡ç« å‘å¸ƒæ—¶é—´\u0026#39;, \u0026#39;æ–‡ç« åœ°å€\u0026#39;]) csv_writer.writeheader() SNUID=get_new_cookies() headers = { \u0026#39;Cookie\u0026#39;: f\u0026#39;IPLOC=CN5101; SUID=A08DB0753822910A0000000062D4E15C; SUV=1658118495598633; \u0026#39; f\u0026#39;ppinf=5|1658121514|1659331114\u0026#39; f\u0026#39;|dHJ1c3Q6MToxfGNsaWVudGlkOjQ6MjAxN3x1bmlxbmFtZTozNjolRTglODclQUElRTUlOUMlQTglRTclOEIlQUMlRTglQTElOEN8Y3J0OjEwOjE2NTgxMjE1MTR8cmVmbmljazozNjolRTglODclQUElRTUlOUMlQTglRTclOEIlQUMlRTglQTElOEN8dXNlcmlkOjQ0Om85dDJsdU5QS01HS01jX2o5WjM5aG5XY1I4d29Ad2VpeGluLnNvaHUuY29tfA; pprdig=IjtTyvBfu3HPN0JuCq-GC-ua97U2qrVaL1lKmQcS5ISR8XkUoZxSWujpBlyP0zSHSItfzFGPWnzTuIhBHYtUwY-PI6COy-6I8RcER_mopugTqcBlwdO-Sc_p7j8a51jQaet93CEJ-MdpiSceBG_Nmu5cLTPN5XhC_3B92CSovak; ppinfo=80456da5d9; passport=5|1658121514|1659331114|dHJ1c3Q6MToxfGNsaWVudGlkOjQ6MjAxN3x1bmlxbmFtZTozNjolRTglODclQUElRTUlOUMlQTglRTclOEIlQUMlRTglQTElOEN8Y3J0OjEwOjE2NTgxMjE1MTR8cmVmbmljazozNjolRTglODclQUElRTUlOUMlQTglRTclOEIlQUMlRTglQTElOEN8dXNlcmlkOjQ0Om85dDJsdU5QS01HS01jX2o5WjM5aG5XY1I4d29Ad2VpeGluLnNvaHUuY29tfA|242a929d54|IjtTyvBfu3HPN0JuCq-GC-ua97U2qrVaL1lKmQcS5ISR8XkUoZxSWujpBlyP0zSHSItfzFGPWnzTuIhBHYtUwY-PI6COy-6I8RcER_mopugTqcBlwdO-Sc_p7j8a51jQaet93CEJ-MdpiSceBG_Nmu5cLTPN5XhC_3B92CSovak; sgid=29-55943661-AWLU7Sr6zRRQxuX98MZMHMw; wuid=1658155657696; VIDEO_DEBUG=off; SNUID={SNUID}; ariaDefaultTheme=undefined; ppmdig=16581727390000000ba8e97bdbf22bfcefd4d50f43d86a61\u0026#39;, \u0026#39;Host\u0026#39;: \u0026#39;weixin.sogou.com\u0026#39;, \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 \u0026#39; \u0026#39;Safari/537.36\u0026#39;, } # proxies = { # \u0026#39;http\u0026#39;:\u0026#39;http://113.222.29.169:22008\u0026#39;, # \u0026#39;https\u0026#39;: \u0026#39;https://113.222.29.169:22008\u0026#39;, # } print(\u0026#39;-------------å¼€å§‹çˆ¬å–-------------\u0026#39;) for page in tqdm(range(1000 + 1)): url = f\u0026#39;https://weixin.sogou.com/weixin?query={urllib.parse.quote(keyword)}\u0026amp;_sug_type_=\u0026amp;s_from=input\u0026amp;_sug_=n\u0026#39; \\ f\u0026#39;\u0026amp;type=2\u0026amp;page={page}\u0026amp;ie=utf8 \u0026#39; try: response = requests.get(url=url, headers=headers) parse_lable(response) # æ§åˆ¶çˆ¬å–é¢‘ç‡ # time.sleep(random.randint(8, 10)) except KeyboardInterrupt: print(\u0026#39;\\n-----------------æ“ä½œä¸­æ­¢---------------------\u0026#39;) print(\u0026#39;-------------çˆ¬å–å®Œæˆ------------\u0026#39;) ä»£ç æœ¬èº«å¾ˆç®€å•ï¼Œå…³é”®åœ¨äºæœç‹—çš„åçˆ¬æœºåˆ¶ï¼ŒCookieå¾ˆå®¹æ˜“å¤±æ•ˆï¼Œå¯èƒ½çˆ¬ä¸¤æ¬¡ç¨‹åºå°±æŒ‚äº†ï¼Œå®¢æˆ·è‡ªå·±æ²¡æœ‰åŠæ³•è°ƒè¯•ã€‚\né‚£ä¹ˆç›´æ¥çœ‹Cookieè¿™ä¸€é¡¹ï¼Œä»–æ˜¯ç”±å¤šä¸ªkey-valueæ‹¼æ¥æˆçš„ï¼Œç»è¿‡è§£æï¼Œå‘ç°èµ·å†³å®šæ€§ä½œç”¨çš„åªæœ‰keyä¸ºSUIDçš„è¿™ä¸€é¡¹ã€‚\nç°åœ¨åªéœ€è¦ç›´æ¥è·å–æœ€æ–°çš„Cookieæ‹¿åˆ°SUIDçš„valueæ‹¼è£…æˆä¸€ä¸ªæ–°Cookie,å®šåˆ¶å…¶æˆä¸ºæ–°çš„è¯·æ±‚å¤´å°±å¯ä»¥å†å»è®¿é—®é¡µé¢å°±å¯ä»¥äº†ã€‚\nè‡³äºæ–°çš„Cookieæ€ä¹ˆæ¥â€¦..\nè§£å†³æ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œæœç‹—å¼•æ“æä¾›äº†å¾ˆå¤šæ¥å£ï¼Œéƒ½æ˜¯å…„å¼Ÿäº§å“ï¼Œæˆ‘ä»¬ç°åœ¨æ“ä½œçš„æ˜¯weixin.sougou.com,è¯•ç€è®¿é—®å…¶ä»–æ¥å£ï¼Œæ¯”å¦‚æœç‹—è§†é¢‘v.sogou.comï¼Œå‘ç°Cookieçš„è§„åˆ™æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯å…³é”®å­—çš„å€¼å¹¶ä¸ä¸€æ ·ï¼Œæˆ‘åªéœ€è¦è®¿é—®urlå†å–å…¶Cookieå°±å¯ä»¥äº†ã€‚å¯¹æœç‹—è§†é¢‘çš„è®¿é—®æ“ä½œä¸è¶³ä»¥è§¦å‘å…¶åçˆ¬æœºåˆ¶ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªé—­ç¯ã€‚\næœ€ç»ˆçš„æ–¹æ¡ˆæ˜¯åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œè®¿é—®æœç‹—è§†é¢‘æ¥å£ï¼Œæ‹¿åˆ°æ–°çš„Cookieè¡¥å……ç»™headersé‡Œçš„Cookie,å®šåˆ¶ä¸€ä¸ªå…¨æ–°çš„è¯·æ±‚å¤´ï¼Œå†å»å¾ªç¯çˆ¬å–æ“ä½œï¼Œæœ€ç»ˆå†™å…¥æ–‡ä»¶ã€‚\nå…¶ä»–ä»£ç éƒ½æ˜¯å­°èƒ½ç”Ÿå·§ï¼Œè§£å†³é—®é¢˜æ€è·¯å¾ˆé‡è¦ã€‚\n","date":"2023-02-01T01:32:50+08:00","permalink":"https://MoonerHigh.github.io/p/%E6%90%9C%E7%8B%97%E7%88%AC%E8%99%AB/","title":"æœç‹—çˆ¬è™«"},{"content":"Newå’ŒMakeçš„åŒºåˆ« ä»¥ä¸‹æ˜¯Go1.19ä¸­å¯¹new()å’Œmake()å‡½æ•°çš„è§£é‡Šï¼š\n1 2 3 4 // The new built-in function allocates memory. The first argument is a type, // not a value, and the value returned is a pointer to a newly // allocated zero value of that type. func new(Type) *Type new()æ˜¯ä¸€ä¸ªæ–°çš„åˆ†é…å†…å­˜çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»å‹ï¼Œä¸æ˜¯å€¼ï¼Œè¿”å›çš„å€¼æ˜¯æŒ‡å‘è¯¥ç±»å‹é›¶å€¼çš„æŒ‡é’ˆã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 // The make built-in function allocates and initializes an object of type // slice, map, or chan (only). Like new, the first argument is a type, not a // value. Unlike new, make\u0026#39;s return type is the same as the type of its // argument, not a pointer to it. The specification of the result depends on // the type: // // Slice: The size specifies the length. The capacity of the slice is // equal to its length. A second integer argument may be provided to // specify a different capacity; it must be no smaller than the // length. For example, make([]int, 0, 10) allocates an underlying array // of size 10 and returns a slice of length 0 and capacity 10 that is // backed by this underlying array. // Map: An empty map is allocated with enough space to hold the // specified number of elements. The size may be omitted, in which case // a small starting size is allocated. // Channel: The channel\u0026#39;s buffer is initialized with the specified // buffer capacity. If zero, or the size is omitted, the channel is // unbuffered. func make(t Type, size ...IntegerType) Type make()å‡½æ•°ç”¨äºåˆå§‹åŒ–slice,mapå’Œchannelã€‚å’Œnew()æ¯”è¾ƒåƒçš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¸æ˜¯å€¼ã€‚åŒºåˆ«äºnewçš„åœ°æ–¹åœ¨äºmake()è¿”å›çš„å€¼å’Œä»–å‚æ•°ç±»å‹æ˜¯ä¸€æ ·çš„ã€‚ç¬¬äºŒä¸ªç±»å‹sizeæ˜¯ä¸€ä¸ªå¯å˜é•¿ç±»å‹çš„å‚æ•°ï¼Œä½œç”¨å¦‚ä¸‹:\n1 2 3 4 m := make(map[int]string, 5) s := make([]int, 5, 10) channel := make(chan string, 5) fmt.Println(m, s, channel) åˆå§‹åŒ–ä¸€ä¸ªslice,ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºé•¿åº¦ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå®¹é‡ï¼Œå®¹é‡ä¸å¯ä»¥å°äºé•¿åº¦ã€‚åˆå§‹åŒ–mapçš„å¯å˜å‚æ•°åªæœ‰å®¹é‡cap,è€Œåˆå§‹åŒ–channelçš„å¯å˜å‚æ•°ä¸ºç¼“å†²å¤§å°ã€‚\n","date":"2023-01-29T12:04:17+08:00","permalink":"https://MoonerHigh.github.io/p/new-or-make/","title":"New or Make"},{"content":"å †å†…å­˜ä¸æ ˆå†…å­˜ ç¨‹åºä¼šåœ¨ä¸¤ä¸ªåœ°æ–¹ä¸ºå˜é‡åˆ†é…å†…å­˜ï¼Œä¸€ä¸ªæ˜¯å…¨å±€çš„å †ç©ºé—´ç”¨æ¥åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå¦ä¸€ä¸ªæ˜¯goroutineçš„æ ˆç©ºé—´ï¼ŒGoè¯­è¨€æ‹¥æœ‰è‡ªåŠ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒå†…å­˜åˆ°åº•æ˜¯åˆ†é…åœ¨å †ä¸Šè¿˜æ˜¯æ ˆä¸Šï¼Œä½†æ˜¯ä»æ€§èƒ½çš„è§’åº¦å‡ºå‘ï¼Œåˆ†é…åœ¨æ ˆç©ºé—´è¿˜æ˜¯å †ç©ºé—´å·®å¼‚è¾ƒå¤§ã€‚\nåœ¨å‡½æ•°ä¸­ç”³è¯·ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœåˆ†é…åœ¨æ ˆä¸Šï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•è‡ªåŠ¨å›æ”¶ï¼Œå¦‚æœåˆ†é…åœ¨å †ä¸Šï¼Œåˆ™åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åæŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œåƒåœ¾å›æ”¶ã€‚\nåœ¨æ ˆä¸Šåˆ†é…æˆ–è€…å›æ”¶å†…å­˜çš„å¼€é”€å¾ˆä½ï¼Œåªéœ€è¦ä¸¤ä¸ªCPUæŒ‡ä»¤ï¼Œä¸€ä¸ªæ˜¯Push,ä¸€ä¸ªæ˜¯Pop,Pushä»£è¡¨åˆ†é…å†…å­˜ï¼ŒPopä»£è¡¨é‡Šæ”¾å†…å­˜ã€‚åœ¨æ ˆä¸Šåˆ†é…å†…å­˜ï¼Œæ¶ˆè€—çš„ä»…æ˜¯å°†å†…å­˜åˆ†é…åˆ°æ ˆä¸Šçš„æ—¶é—´ï¼Œå†…å­˜çš„IOé€Ÿåº¦é€šå¸¸èƒ½å¤Ÿè¾¾åˆ°30GB/sï¼Œå› æ­¤åœ¨æ ˆä¸Šåˆ†é…å†…å­˜æ•ˆç‡æ¯”è¾ƒé«˜ã€‚\nåœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œä¸€ä¸ªå¾ˆå¤§çš„é¢å¤–å¼€é”€æ˜¯åƒåœ¾å›æ”¶ï¼ŒGoè¯­è¨€ä½¿ç”¨çš„æ˜¯æ¸…é™¤æ ‡è®°ç®—æ³•ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä½¿ç”¨äº†ä¸‰è‰²æ ‡è®°æ³•å’Œå†™å±éšœç®—æ³•ï¼Œæé«˜äº†æ•ˆç‡ã€‚\né€ƒé€¸åˆ†æ Goè¯­è¨€ä¸­ï¼Œå †å†…å­˜æ˜¯é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨ç®¡ç†çš„ï¼Œé‚£ä¹ˆGoçš„ç¼–è¯‘å™¨å¦‚ä½•çŸ¥é“å†…å­˜æ˜¯åˆ†é…åœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šå‘¢ï¼Ÿç¼–è¯‘å™¨å†³å®šå†…å­˜åˆ†é…ä½ç½®çš„æ–¹å¼ï¼Œå°±å«é€ƒé€¸åˆ†æã€‚é€ƒé€¸åˆ†æç”±ç¼–è¯‘å™¨å®Œæˆï¼Œä½œç”¨äºç¼–è¯‘é˜¶æ®µã€‚\næŒ‡é’ˆé€ƒé€¸ åœ¨å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›äº†è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°è™½ç„¶é€€å‡ºäº†ï¼Œä½†æ˜¯å› ä¸ºæŒ‡é’ˆçš„å­˜åœ¨ï¼Œå¯¹è±¡çš„å†…å­˜ä¸èƒ½éšç€å‡½æ•°çš„ç»“æŸè€Œå›æ”¶ï¼Œå› æ­¤åªèƒ½åˆ†é…åœ¨å †ä¸Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 package main import \u0026#34;fmt\u0026#34; type Demo struct { name string } func createDemo(name string) *Demo { d := new(Demo) d.name = name return d } func main() { demo := createDemo(\u0026#34;demo\u0026#34;) fmt.Println(demo) } 1 go run -gcflags \u0026#34;-m -l\u0026#34; Demo30.go ./Demo30.go:9:17: leaking param: name ./Demo30.go:10:10: new(Demo) escapes to heap ./Demo30.go:16:13: \u0026hellip; argument does not escape \u0026amp;{demo}\nnew(Demo) escapes to heapè¯´æ˜new(Demo)é€ƒé€¸åˆ°äº†å †ä¸Š\nInterfaceåŠ¨æ€ç±»å‹é€ƒé€¸ ç©ºæ¥å£Interface{}å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹ï¼Œå¦‚æœå‡½æ•°çš„å‚æ•°ä¸ºinterface{},ç¼–è¯‘æœŸæ— æ³•ç¡®å®šå…·ä½“ç±»å‹ï¼Œåˆ™ä¼šå‘ç”Ÿé€ƒé€¸ã€‚\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­\n1 2 3 4 func main() { demo := createDemo(\u0026#34;demo\u0026#34;) fmt.Println(demo) } æˆ‘ä»¬å°†mainå‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡demoä½œä¸ºå®é™…å‚æ•°ä¼ ç»™fmt.Printlnæ–¹æ³•ï¼Œ\nfmt.Printlnæ–¹æ³•çš„å®ç°å¦‚ä¸‹\n1 2 3 func Println(a ...any) (n int, err error) { return Fprintln(os.Stdout, a...) } å‚æ•°ç±»å‹ä¸ºaâ€¦anyå³interface{}ç±»å‹ï¼Œå› æ­¤å‘ç”Ÿäº†é€ƒé€¸ã€‚\næ ˆç©ºé—´ä¸è¶³ è¶…è¿‡ä¸€å®šå¤§å°çš„å±€éƒ¨å˜é‡ä¼šé€ƒé€¸åˆ°å †ä¸Šï¼Œå˜é‡å¤§å°ä¸ç¡®å®šï¼Œä¹Ÿä¼šé€ƒé€¸åˆ°å †ä¸Šã€‚\né—­åŒ… 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 package main import \u0026#34;fmt\u0026#34; func Increment() func() int { n := 0 return func() int { n++ return n } } func main() { increment := Increment() fmt.Println(increment()) fmt.Println(increment()) } Increment()è¿”å›å€¼æ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œè¯¥åŒ¿åå‡½æ•°è®¿é—®äº†å¤–éƒ¨å˜é‡n,å¤–éƒ¨å˜é‡nå°†ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°incrementè¢«é”€æ¯ã€‚å˜é‡nçš„å†…å­˜ä¸èƒ½éšç€å‡½æ•°Increment()æ¨å‡ºè€Œè¢«é”€æ¯ï¼Œå› æ­¤å°†ä¼šé€ƒé€¸åˆ°å †ä¸Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 âœ Demo go run -gcflags=-m Demo31.go # command-line-arguments ./Demo31.go:5:6: can inline Increment ./Demo31.go:7:9: can inline Increment.func1 ./Demo31.go:14:24: inlining call to Increment ./Demo31.go:7:9: can inline main.func1 ./Demo31.go:15:23: inlining call to main.func1 ./Demo31.go:15:13: inlining call to fmt.Println ./Demo31.go:16:23: inlining call to main.func1 ./Demo31.go:16:13: inlining call to fmt.Println ./Demo31.go:6:2: moved to heap: n ./Demo31.go:7:9: func literal escapes to heap ./Demo31.go:14:24: func literal does not escape ./Demo31.go:15:13: ... argument does not escape ./Demo31.go:15:23: ~R0 escapes to heap ./Demo31.go:16:13: ... argument does not escape ./Demo31.go:16:23: ~R0 escapes to heap ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºéœ€è¦ä¿®æ”¹åŸå¯¹è±¡å€¼ï¼Œæˆ–å ç”¨å†…å­˜æ¯”è¾ƒå¤§çš„ç»“æ„ä½“ï¼Œé€‰æ‹©ä¼ æŒ‡é’ˆã€‚å¯¹äºåªè¯»çš„å ç”¨å†…å­˜è¾ƒå°çš„ç»“æ„ä½“ï¼Œç›´æ¥ä¼ å€¼èƒ½å¤Ÿè·å¾—æ›´å¥½çš„æ€§èƒ½\nå‚è€ƒé“¾æ¥ï¼šGo é€ƒé€¸åˆ†æ\n","date":"2023-01-27T13:58:43+08:00","permalink":"https://MoonerHigh.github.io/p/%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90/","title":"é€ƒé€¸åˆ†æ"},{"content":"SQLä¼˜åŒ– æŸ¥è¯¢SQLå°½é‡ä¸è¦ä½¿ç”¨select *ï¼Œè€Œæ˜¯ä½¿ç”¨å…·ä½“å­—æ®µ\nselect * è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¾ˆå¯èƒ½ä¸ä¼šç”¨åˆ°ç´¢å¼•ï¼Œé¿å…é€ æˆå…¨è¡¨æ‰«æ èŠ‚çœèµ„æºï¼Œå‡å°‘ç½‘ç»œå¼€é”€ é¿å…åœ¨whereå­å¥ä¸­ä½¿ç”¨oræ¥è¿æ¥æ¡ä»¶\nåä¾‹ 1 select * from employee where id = 1 or salary = 3000; æ­£ä¾‹ ä½¿ç”¨union all\n1 2 3 select * from employee where id=1 union all select * from employee where salary = 3000; åˆ†å¼€ä¸¤æ¡SQLå†™\n1 2 select * from employee where id=1; select * from employee where salary=3000; ","date":"2023-01-13T10:48:35+08:00","permalink":"https://MoonerHigh.github.io/p/sql%E4%BC%98%E5%8C%96/","title":"SQLä¼˜åŒ–"}]